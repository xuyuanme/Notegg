<!doctype html>
<html>
<head>
    <script type="text/javascript" src="cordova.js"></script>
    <script src="lib/dropbox/dropbox.min.js"></script>
    <link rel="stylesheet" href="css/app.css">
</head>
<body>
<div>
    <button id="writeButton">Click to create <code>notes.txt</code> in Dropbox.</button>
</div>

<script>
    var client = new Dropbox.Client({ key: 'w7hk0g1c2pnqs8g' });
    client.authDriver(new Dropbox.AuthDriver.Cordova());
    function doHelloWorld() {
        client.writeFile('notes.txt', 'Hello, World!', function (error) {
            if (error) {
                window.alert('Error: ' + error);
            } else {
                window.alert('File written successfully!');
            }
        });
    }

    document.getElementById('writeButton').onclick = function () {
        client.authenticate(function (error, client) {
            if (error) {
                window.alert('Error: ' + error);
            } else {
                window.alert('auth ok. now go with file writing');
                doHelloWorld();
            }
        });
    }
</script>
</body>
</html>